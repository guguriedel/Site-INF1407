{% extends 'FilmesApp/base.html' %}

{% block content %}
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Filmes Cadastrados</h2>
        <a href="{% url 'FilmesApp:criar_filme' %}" class="btn btn-primary">Adicionar Novo Filme</a>
    </div>

    <form method="get" class="mb-4">
        <div class="form-row">
            <div class="col-md-4 mb-3">
                <label for="nome">Nome do Filme</label>
                <input type="text" class="form-control" name="nome" id="nome" value="{{ valores_filtro.nome }}">
            </div>
            <div class="col-md-3 mb-3">
                <label for="genero">Gênero</label>
                <input type="text" class="form-control" name="genero" id="genero" value="{{ valores_filtro.genero }}">
            </div>
            <div class="col-md-2 mb-3">
                <label for="nota">Nota (maior ou igual a)</label>
                <input type="number" step="0.1" class="form-control" name="nota" id="nota" value="{{ valores_filtro.nota }}">
            </div>
            <div class="col-md-3 mb-3">
                <label for="orderby">Ordenar por</label>
                <select name="orderby" id="orderby" class="form-control">
                    <option value="-data_publicacao" {% if valores_filtro.orderby == '-data_publicacao' %}selected{% endif %}>Mais Recentes</option>
                    <option value="nome" {% if valores_filtro.orderby == 'nome' %}selected{% endif %}>Nome (A-Z)</option>
                    <option value="-nome" {% if valores_filtro.orderby == '-nome' %}selected{% endif %}>Nome (Z-A)</option>
                    <option value="-nota" {% if valores_filtro.orderby == '-nota' %}selected{% endif %}>Maior Nota</option>
                    <option value="nota" {% if valores_filtro.orderby == 'nota' %}selected{% endif %}>Menor Nota</option>
                    <option value="-duracao_em_segundos" {% if valores_filtro.orderby == '-duracao_em_segundos' %}selected{% endif %}>Maior Duração</option>
                    <option value="duracao_em_segundos" {% if valores_filtro.orderby == 'duracao_em_segundos' %}selected{% endif %}>Menor Duração</option>
                </select>
            </div>
        </div>
        <button type="submit" class="btn btn-secondary">Buscar</button>
        <a href="{% url 'FilmesApp:lista-filmes' %}" class="btn btn-outline-secondary">Limpar Filtros</a>
    </form>
    
    <ul class="list-group">
        {% for filme in filmes %}
            <li class="list-group-item">
                <h5>{{ filme.nome }} ({{ filme.data_publicacao|date:"Y" }})</h5>
                <p class="mb-1">
                    <strong>Gênero:</strong> {{ filme.genero }} |
                    <strong>Nota:</strong> {{ filme.nota }} |
                    <strong>Duração:</strong> {{ filme.duracao_em_segundos }} segundos
                </p>
            </li>
        {% empty %}
            <li class="list-group-item">Nenhum filme encontrado.</li>
        {% endfor %}
    </ul>
{% endblock %}